repos:
  - repo: local
    hooks:
      - id: generate_stubs
        name: Generate .pyi files
        language: system
        entry: >
          bash -c 'if [[ "$OSTYPE" == "msys" ]]; then
            "$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)/src/bindings/python/scripts/generate_pyapi_stubs.bat";
          else
            "$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)/src/bindings/python/scripts/generate_pyapi_stubs.sh";
          fi;
          git add ./*.pyi'
        files: .*src/bindings/python/.*
        pass_filenames: false
        stages: [pre-commit]
